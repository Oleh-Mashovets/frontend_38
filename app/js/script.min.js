"use strict";const wrap=document.getElementById("character__list");let url,idUser,selected,userName;async function getCharacters(e){selected=document.querySelector('input[name="filter"]:checked').value,userName=document.getElementById("user").value,url="page="+e;const t=`https://rickandmortyapi.com/api/character?${url}&name=`+userName+"&status="+selected,n=await fetch(t);idUser=await n.json(),addElement()}function addElement(){for(pageNum.innerHTML=current_page;wrap.children.length>1;)wrap.removeChild(wrap.lastChild);for(let e=0;e<idUser.results.length;e++){let t,n,r=document.createElement("div");r.classList.add("item__block"),r.innerHTML=`<div class="wrapper">\n    <div class="wrapper__item">\n    <p class="item__text">${idUser.results[e]?.id}</p>\n    <p class="item__text">${idUser.results[e]?.name}</p>\n    <p class="item__text">${idUser.results[e]?.status}</p>\n    </div>\n    <div class="wrapper__button">\n    <button btn-name="delete" onClick="handleRecordAction(event)" id="btn">Delete</button>\n    </div>\n    </div>`,wrap.appendChild(r),r.addEventListener("click",(a=>{a.preventDefault(),a.stopPropagation(),popUp.classList.add("active"),t=document.querySelector(".pop-up__info"),t.innerHTML=`name:<br><br><b>${idUser.results[e]?.name}</b><br><br><br><br> \n      id: <b>${idUser.results[e]?.id}</b><br><br> \n      status: <b>${idUser.results[e]?.status}</b>`,n=document.querySelector(".pop-up__image");let s=`<img class="img" src="${idUser.results[e].image}">`;n.innerHTML=s;let c=document.querySelectorAll(".item__block");for(let e=0;e<c.length;e++)c[e].classList.contains("toggle__border")&&c[e].classList.remove("toggle__border");r.classList.add("toggle__border")})),document.getElementsByTagName("body")[0].addEventListener("click",(()=>{popUp.classList.remove("active")}))}}const closePopUp=document.getElementById("close"),popUp=document.querySelector(".pop-up");closePopUp.addEventListener("click",(e=>{e.preventDefault(),popUp.classList.remove("active")}));const actionList={delete:e=>{e.remove()}};function handleRecordAction(e){e.stopPropagation();const t=e.target,n=e.target.getAttribute("btn-name");n in actionList&&actionList[n](t.parentElement.parentElement.parentElement)}let radioBnt=document.querySelectorAll('input[name="filter"]'),btnSearch=document.querySelector(".search"),clear=document.getElementById("user"),findSelected=()=>{selected=document.querySelector('input[name="filter"]:checked').value};function handlerSearch(){getCharacters(1)}radioBnt.forEach((e=>{e.addEventListener("change",findSelected)}));const btnList=document.querySelector(".button__list");let btnPrev=document.createElement("button");btnPrev.classList.add("btn__prev"),btnPrev.innerText=`${String.fromCharCode(8249)} prev`,btnList.appendChild(btnPrev);let pageNum=document.createElement("p");pageNum.classList.add("page"),pageNum.innerText="",btnList.appendChild(pageNum);let btnNext=document.createElement("button");btnNext.classList.add("btn__next"),btnNext.innerText=`next ${String.fromCharCode(8250)}`,btnList.appendChild(btnNext),btnNext.addEventListener("click",(()=>{current_page<idUser.results.length&&(getCharacters(current_page+=1),pageNum.innerHTML=current_page)})),btnPrev.addEventListener("click",(()=>{current_page>1&&(getCharacters(current_page-=1),pageNum.innerHTML=current_page)}));let current_page=1,prevPage=function(){current_page--},nextPage=function(){current_page++};